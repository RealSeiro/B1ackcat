# 139,445 - Pentesting SMB



<pre class="language-bash"><code class="lang-bash"><strong>enum4linux -a 10.10.10.100 #-a : 모든 정보 가져오기 
</strong>smbmap -H 10.10.10.100 
smbclient //10.10.10.100/Replication -U ""%""  #-U는 사용자 인증 정보 지정 옵션 (유저 아이디 같은 것) but 여기서는 빈문자열 ""%""을 사용하여 익명으로 접속
smbmap -H 10.10.10.100 -r #공유가능한 폴더 재귀적으로 나열 
crackmapexec smb support.htb #호스트 이름과 도메인 표시 
crackmapexec smb support.htb --shares #공유가능한 폴더 모두 표시 
smbclient -N -L //support.htb #-N : 인증 없이, -L : 호스트의 공유 목록 표시
smbclient --user r.thompson //10.10.10.182/data rY4n5eva #smb data 접속
smb: \> mask ""
smb: \> recurse ON
smb: \> prompt OFF
smb: \> mget * #이러면 각 공유에 있는 모든 파일 다운 가능
#다운로드한 폴더에서 파일 찾는 명령어 
find smb-data-loot/ -type f

<strong>mount -t cifs //10.10.10.192/profiles$ /mnt #파일 마운트 명령어
</strong>#-t cifs: 마운트할 파일 시스템의 유형을 지정합니다. 여기서는 CIFS를 사용하므로 -t cifs로 지정합니다.
sudo umount ./blackfield/smb # unmount
</code></pre>

```bash
// SMB 명령어 
get <파일명> #파일 다운 명령어 

```

### 비밀번호 스프레이&#x20;

* 많은 사용자들에게 하나의 비밀번호를 대입하는 것&#x20;

```bash
crackmapexec smb 10.10.10.169 -u users -p 'Welcome123!' --continue-on-success

```
